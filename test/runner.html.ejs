
<html>
  <head>
    <title>Mocha - jQuery Validation Engine Tests</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <%function render(f) {
        var m = f.match(/\.(\w+)$/);
        if(!m) return '';
        if(m[1] === 'js')
          return '<script type="text/javascript" src="../../' + f +'"></script>\n';
        if(m[1] === 'css')
          return '<link rel="stylesheet" href="../../' + f +'"/>\n';
        return '';
      }%>
    <!-- libs -->
    <%- expand('test/lib/*').map(render).join('    ') %>
    <!-- setup mocha (adds BDD methods) -->
    <script type="text/javascript">mocha.setup('bdd');</script>

    <!-- verifyjs -->
    <script type="text/javascript" src="../../dist/verify.js"></script>
    <!-- rule manifest -->
    <script type="text/javascript">
      var MANIFEST = <%- read('dist/rules/manifest.json') %>;
    </script>
    <!-- all rules -->
    <%- expand('dist/rules/*/*.js').map(render).join('    ') %>

    <!-- tests -->
    <%- expand('test/build/*.js').map(render).join('    ') %>

    <script type="text/javascript">
      afterEach(function() {
        $("#fixtures").empty();
      })

      var expect = chai.expect;
      var should = chai.should();
      var assert = function(expr, msg) {
        if (!expr) throw new Error(msg || 'failed');
      }

      if (navigator.userAgent.indexOf('PhantomJS') === -1)
        $(function() {
          mocha.run(function() {
            if(window['console']) console.warn(arguments);
          });
        });
    </script>

  </head>
  <body>
    <div id="mocha"></div>
    <div id="fixtures"></div>
  </body>
</html>
